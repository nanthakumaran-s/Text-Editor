
@model Text_Editor.Models.DocModel
@{
}

<form asp-action="Create" id="form">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem">
        <input asp-for="DocName" style="width: 20%;" class="form-control"/>
        <div style="display: flex; gap: 20px; align-items: center">
            <div class="form-check form-switch">
                <label class="form-check-label" for="flexSwitchCheckDefault">Share</label>
                <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
            </div>
            <img 
                src="https://media.istockphoto.com/id/844294300/vector/download-icon-isolated-vector.jpg?s=612x612&w=0&k=20&c=VCmvy8uEoTQnt9W0kZzjEBplN_opDkGKF_eQTLfkivs=" 
                style="height: 35px; width: 30px; cursor: pointer"
             />
            <button id="save-btn" class="btn btn-primary">Save Changes</button>
        </div>
        <input asp-for="DocContent" id="data" class="visually-hidden" />
    </div>
</form>
<div id="editor" style="height: 60vh">
</div>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
<script type="text/javascript">

    var quill = new Quill('#editor', {
        theme: 'snow'
    });
    window.onload = () => {
        quill.setContents(JSON.parse(document.getElementById("data").value))

    }

    const button = document.getElementById("save-btn")
    const form = document.getElementById("form")
    const inputTag = document.getElementById("data")
    button.addEventListener("click", () => {
        inputTag.value = quill.root.innerHTML
        form.submit();
    })


</script>